(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0a3ce8"],{"046d":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-pa-md full-width "},[n("div",{staticClass:"row items-center"},[n("q-btn",{staticClass:"col",attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$router.push("/auth/bind_login")}}},[t._v("点击绑定新帐号\n    ")])],1),n("div"),n("q-card",{directives:[{name:"show",rawName:"v-show",value:t.noBindCard,expression:"noBindCard"}],attrs:{bordered:""}},[n("q-card-section",[n("div",{staticClass:"text-body2"},[t._v("当前 Line 尚未绑定任何帐号")])]),n("q-separator",{attrs:{inset:""}})],1),n("q-card",{directives:[{name:"show",rawName:"v-show",value:!t.noBindCard,expression:"!noBindCard"}],attrs:{bordered:""}},[n("q-card-section",[n("div",{staticClass:"text-body2"},[t._v("以下是您的Line当前绑定的帐号("+t._s(t.bindsUserCount)+"个子帐号)")])]),n("q-separator",{attrs:{inset:""}})],1),n("q-page",[n("q-scroll-area",{attrs:{offset:250}},t._l(t.lineUsers,function(e,s){return n("div",{key:s,on:{click:function(n){return t.switchUser(e)}}},[n("q-item",[n("q-item-section",[e.teacher?n("q-item-label",{staticClass:"text-h6 cn-bold-font",staticStyle:{"font-size":"15px"}},[t._v("\n              教师 "+t._s(e.teacher.username)+"\n            ")]):t._e(),e.student?n("q-item-label",{staticClass:"text-h6 cn-bold-font",staticStyle:{"font-size":"15px"}},[t._v("\n              学员 "+t._s(e.student.username)+"\n            ")]):t._e()],1),n("q-item-section",{attrs:{side:""}},[n("q-icon",{attrs:{name:"swap_horiz",color:"primary"}})],1)],1),n("q-separator",{attrs:{spaced:"",inset:""}})],1)}),0)],1)],1)},a=[],i=n("bc3a"),r=n.n(i),o={data:function(){return{bindsUserCount:0,lineUsers:null,noBindCard:!1}},mounted:function(){this.refreshData()},created:function(){},methods:{refreshData:function(){var t=this,e=this,n=this.getLocalTokenType();if(n){var s=this.$q.localStorage.getItem("line_access_token"),a=n+"/line_users";"line"===n&&(a=a+"?line_token="+s),r.a.get(a).then(function(n){e.lineUsers=n["data"],0===e.lineUsers.length?t.noBindCard=!0:(t.noBindCard=!1,t.bindsUserCount=e.lineUsers.length)}).catch(function(e){t.handleErrorResponse(e)}).then(function(){e.loading=!1})}},switchUser:function(t){var e=this;console.log(t);var n={};t.student?(n["sign_type"]="student",n["id"]=t.student.id):t.teacher&&(n["sign_type"]="teacher",n["id"]=t.teacher.id);var s=this.getLocalTokenType();if(s){var a=this.$q.localStorage.getItem("line_access_token"),i=s+"/switch_user";"line"===s&&(n["line_token"]=a);var o=this;r.a.post(i,n).then(function(t){var n=new Date;o.updateLocalStorageTokenInfo(t.data.access_token,t.data.sign_type,n.getTime()+1e3*t.data.expires_in),e.$q.notify({color:"info",icon:"thumb_up",message:"登录成功 !",timeout:500}),o.$router.push({path:"/"+t.data.sign_type})}).catch(function(t){e.handleErrorResponse(t)}).then(function(){o.loading=!1})}}}},c=o,d=n("2877"),l=Object(d["a"])(c,s,a,!1,null,null,null);e["default"]=l.exports}}]);